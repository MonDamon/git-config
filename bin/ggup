#!/bin/sh

# git upstream - figure out ref of upstream branch

root="`git root`"
if [ -d "$root/.git/svn" ]; then
    upstream=trunk
else
    upstream=$(git config "branch.`git head`.remote")
    if [ -z "$upstream" ]; then
        upstream=origin
    fi
fi

if ! git rev-parse "$upstream" >/dev/null 2>&1; then
    echo "Couldn't figure out upstream ref; aborting." >&2
    exit 1
fi

echo "$upstream"
